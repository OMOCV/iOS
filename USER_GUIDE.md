# ABB Robot Reader - 用户指南

## 简介

ABB Robot Reader 是一个专门用于阅读和查看 ABB 机器人程序的 iOS 应用程序。它支持解析 ABB RAPID 语言的各种文件格式，并提供语法高亮功能，使程序代码更易于阅读和理解。

## 支持的文件格式

应用程序支持以下 ABB 机器人程序文件格式：

- **`.mod`** - 模块文件（最常用）
- **`.prg`** - 程序文件
- **`.sys`** - 系统文件
- **`.cfg`** - 配置文件

所有这些文件都使用 ABB RAPID 编程语言。

## 主要功能

### 1. 文件导入

应用支持多种方式导入文件：

- **从文件应用导入**：点击 "+" 按钮，从 iOS 文件应用中选择文件
- **从 iCloud Drive 导入**：支持直接访问 iCloud 中的文件
- **多文件导入**：可以一次选择多个文件同时导入
- **文件共享**：应用支持通过 iTunes 或 Finder 的文件共享功能传输文件

### 2. 程序解析

应用会自动解析并识别：

- **模块类型**
  - MODULE（普通模块）
  - SYSMODULE（系统模块）
  - USERMODULE（用户模块）

- **例行程序类型**
  - PROC（过程）
  - FUNC（函数）
  - TRAP（陷阱）

- **变量声明**
  - VAR（变量）
  - PERS（持久变量）
  - CONST（常量）
  - ALIAS（别名）

### 3. 语法高亮

应用提供完整的语法高亮功能：

| 元素类型 | 颜色 | 说明 |
|---------|------|------|
| 关键字 | 紫色（加粗） | MODULE, PROC, IF, WHILE 等 |
| 数据类型 | 蓝色 | num, bool, robtarget 等 |
| 指令 | 橙色 | MoveL, MoveJ, SetDO 等 |
| 注释 | 绿色 | 以 ! 开头的行 |
| 字符串 | 红色 | 双引号包围的文本 |
| 数字 | 青色 | 数值常量 |

### 4. 代码浏览

- **文件列表**：显示所有已导入的文件及其包含的模块数量
- **模块视图**：展开查看每个模块的详细信息
- **例行程序列表**：查看模块中的所有过程、函数和陷阱
- **声明列表**：查看模块中的所有变量声明
- **完整代码视图**：支持查看整个模块或单个例行程序的代码
- **文本选择**：支持选择和复制代码

## 使用步骤

### 第一次使用

1. **启动应用**
   - 打开 ABB Robot Reader 应用
   - 首次启动会看到欢迎界面

2. **导入文件**
   - 点击蓝色的 "Import Files" 按钮
   - 或点击右上角的 "+" 按钮
   - 浏览并选择 ABB 机器人程序文件
   - 点击 "Open" 确认

3. **浏览程序**
   - 文件导入后会显示在列表中
   - 点击文件名查看详细信息

### 查看程序结构

1. **查看模块列表**
   - 点击文件可以看到所有模块
   - 每个模块会显示名称、类型和包含的例行程序数量

2. **查看例行程序**
   - 展开 "Routines" 部分
   - 可以看到所有 PROC、FUNC 和 TRAP
   - 点击例行程序名称查看具体代码

3. **查看声明**
   - 展开 "Declarations" 部分
   - 可以看到所有变量、常量和持久变量的声明

### 查看代码

1. **查看单个例行程序**
   - 在例行程序列表中点击要查看的例行程序
   - 代码会以语法高亮的形式显示
   - 支持滚动查看完整代码

2. **查看完整模块**
   - 点击 "View Full Module" 按钮
   - 显示整个模块的代码
   - 包括所有声明和例行程序

3. **复制代码**
   - 长按代码文本
   - 选择要复制的部分
   - 使用标准 iOS 复制功能

### 管理文件

1. **添加更多文件**
   - 随时点击 "+" 按钮导入新文件
   - 新文件会添加到现有列表中

2. **清除所有文件**
   - 点击左上角的垃圾桶图标
   - 确认清除所有已导入的文件

## 示例文件

应用项目中包含示例文件（位于 `SamplePrograms/` 目录）：

1. **MainModule.mod**
   - 完整的机器人程序示例
   - 包含主程序、子程序、函数和陷阱
   - 演示了循环、条件判断、运动指令等

2. **UtilityModule.mod**
   - 实用工具函数模块
   - 演示了简单的函数定义

可以使用这些文件来测试应用功能。

## ABB RAPID 语法参考

### 基本结构

```rapid
MODULE ModuleName
    ! 声明部分
    VAR num myVariable := 0;
    
    ! 例行程序
    PROC MyProcedure()
        ! 代码
    ENDPROC
    
ENDMODULE
```

### 常用关键字

- **模块**: MODULE, ENDMODULE
- **例行程序**: PROC, ENDPROC, FUNC, ENDFUNC
- **控制流**: IF, THEN, ELSE, ENDIF, WHILE, DO, ENDWHILE, FOR, TO, ENDFOR
- **变量**: VAR, PERS, CONST
- **逻辑**: AND, OR, NOT
- **其他**: GOTO, RETURN, EXIT

### 常用指令

- **运动**: MoveL, MoveJ, MoveC, MoveAbsJ
- **I/O**: SetDO, SetAO, SetGO, WaitDI
- **等待**: WaitTime, WaitUntil
- **显示**: TPWrite

## 技巧和最佳实践

1. **批量导入**
   - 可以一次选择多个文件导入
   - 适合导入完整的机器人程序包

2. **快速导航**
   - 使用例行程序列表快速定位到特定代码
   - 使用搜索功能（iOS 原生）在代码中查找

3. **代码分析**
   - 使用语法高亮快速识别关键字和指令
   - 注意紫色关键字了解程序结构
   - 注意橙色指令了解机器人操作

4. **学习参考**
   - 使用示例文件学习 RAPID 语法
   - 将实际机器人程序导入应用进行学习

## 故障排除

### 文件无法导入

- 确认文件扩展名为 .mod, .prg, .sys, 或 .cfg
- 确认文件是文本格式（不是二进制文件）
- 检查文件权限

### 解析错误

- 某些复杂的 RAPID 语法可能无法完全识别
- 应用仍会显示原始代码内容
- 语法高亮仍然有效

### 性能问题

- 非常大的文件（超过 1MB）可能加载较慢
- 考虑将大文件分割成多个模块

## 系统要求

- iOS 15.0 或更高版本
- iPhone 或 iPad
- 约 10MB 存储空间

## 隐私和安全

- 应用不会上传或共享您的文件
- 所有文件处理都在设备本地完成
- 应用不需要网络连接

## 反馈和支持

如果您有任何问题、建议或发现了 bug，请在项目的 GitHub 页面提交 Issue。

---

**享受使用 ABB Robot Reader！**
